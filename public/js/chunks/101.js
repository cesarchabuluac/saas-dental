(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{"+7SU":function(t,a,n){var e=n("Y/bO");"string"==typeof e&&(e=[[t.i,e,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(e,r);e.locals&&(t.exports=e.locals)},AEby:function(t,a,n){var e=n("wGgM");"string"==typeof e&&(e=[[t.i,e,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(e,r);e.locals&&(t.exports=e.locals)},AK5k:function(t,a,n){"use strict";n("AEby")},ByUh:function(t,a,n){"use strict";n.d(a,"a",(function(){return c}));var e=n("1OyB"),r=n("vuIU"),i=n("vDqi"),l=n.n(i),c=function(){function t(){Object(e.a)(this,t)}return Object(r.a)(t,[{key:"index",value:function(t){return l.a.get("/api/patients",{params:t})}},{key:"save",value:function(t){return l.a.post("/api/patients",t)}},{key:"update",value:function(t,a){return l.a.put("/api/patients/".concat(t),a)}},{key:"getPatientDetail",value:function(t,a){return l.a.get("/api/patients/".concat(t),{params:a})}},{key:"show",value:function(t,a){return a.isPdf||a.isPrint?l.a.get("/api/patients/".concat(t),{params:a,responseType:"arraybuffer"}):l.a.get("/api/patients/".concat(t),{params:a})}},{key:"deletePatient",value:function(t){return l.a.delete("/api/patients/".concat(t))}},{key:"getList",value:function(t){return l.a.get("/api/patients",{params:t})}},{key:"find",value:function(t){return l.a.get("/api/patients/".concat(t))}},{key:"filterList",value:function(){return l.a.get("/api/patients/filter")}},{key:"search",value:function(t){return l.a.get("/api/patients/search",{params:{q:t}})}},{key:"nextAppointment",value:function(t){return l.a.get("/api/patients/next-appointment",{params:t})}}]),t}()},"Y/bO":function(t,a,n){(a=n("JPst")(!1)).push([t.i,"[dir] .flatpickr-small .flatpickr-input[data-v-6c4624b4] {\n  padding: 5px;\n}\n.flatpickr-input[data-v-6c4624b4] {\n  height: 30px !important;\n}",""]),t.exports=a},iZRA:function(t,a,n){"use strict";n("+7SU")},"kj/f":function(t,a,n){"use strict";n.r(a);var e=n("VTBJ"),r=n("x+uP"),i=n("HaE+"),l=(n("TeQF"),n("07d7"),n("ma9I"),n("vDqi")),c=n.n(l),o=n("wd/R"),s=n.n(o),d=n("w48C"),p=n.n(d),f=n("SYT2"),k=n("IF94"),u=n("1uQM"),m=n("KaE5"),b=n("oVt+"),y=n("sove"),h=n("YZfj"),v=n("mwM1"),g=n("AeMN"),w=n("6Ytq"),x=n("GUe+"),R=n("JtJI"),P=n("qlm0"),$=n("tvh2"),Y=n("Iab2"),D=new(n("ByUh").a),M={name:"PatientStatistics",components:{BCard:k.a,BCardText:u.a,BTable:m.a,BRow:b.a,BCol:y.a,BCardBody:h.a,BOverlay:v.a,BSpinner:g.a,BBadge:w.a,BButton:x.a,BPagination:R.a,BLink:P.a,flatPickr:p.a},data:function(){return{loading:!1,patients:[],column:[{key:"name",label:this.$t("patients.table.name")},{key:"email",label:this.$t("patients.table.email")},{key:"cellphone",label:this.$t("patients.table.cellphone")},{key:"phone",label:this.$t("patients.table.phone")},{key:"created_at",label:this.$t("patients.table.created_at")},{key:"pending",label:this.$t("appointments.table_state_pending")},{key:"confirmed",label:this.$t("appointments.table_state_confirmed")},{key:"canceled",label:this.$t("appointments.table_state_canceled")},{key:"assisted",label:this.$t("appointments.table_state_assisted")},{key:"unassisted",label:this.$t("appointments.table_state_unassisted")},{key:"approved",label:this.$t("patients.table.budget_approved")},{key:"unapproved",label:this.$t("patients.table.budget_pending")},{key:"total_debt",label:this.$t("patients.table.debt")},{key:"total_paid",label:this.$t("patients.table.paid")},{key:"total_balance",label:this.$t("patients.table.balance")},{key:"last_paid",label:this.$t("patients.table.last_payment")},{key:"status",label:this.$t("patients.table.status")}],filter:{start:s()().startOf("month").format("YYYY-MM-DD"),end:s()().format("YYYY-MM-DD"),name:null},perPageOptions:[10,25,50,100],perPage:100,currentPage:1,totalPatient:0,from:0,to:0,pagination:{},offset:3,isMobile:!1}},created:function(){"es"===$.a.state.auth.setting.language&&flatpickr.localize(f.Spanish)},computed:{dataMeta:function(){var t=_.size(this.patients);return{from:this.perPage*(this.currentPage-1)+(t?1:0),to:this.perPage*(this.currentPage-1)+t,of:this.totalPatient}}},mounted:function(){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return window.addEventListener("resize",t.handleResize),t.handleResize(),a.next=4,t.getPatients();case 4:case"end":return a.stop()}}),a)})))()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.isMobile=window.innerWidth<576},getPatients:function(){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){var n,i,l;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(e.a)(Object(e.a)({},t.filter),{},{perPage:t.perPage,page:t.currentPage,isReport:!0}),t.loading=!0,a.next=4,D.index(n);case 4:i=a.sent,l=i.data,t.loading=!1,t.patients=l.data,t.totalPatient=l.total;case 9:case"end":return a.stop()}}),a)})))()},downloadReport:function(){var t=this;return Object(i.a)(Object(r.a)().mark((function a(){var n;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Object(e.a)(Object(e.a)({},t.filter),{},{isDownload:!0});try{t.loading=!0,c.a.get("/api/patients",{responseType:"blob",params:Object(e.a)({},n)}).then((function(a){t.loading=!1;var n=new Blob([a.data],{type:"application/vnd.ms-excel"});Object(Y.saveAs)(n,"".concat(t.$t("patients.statistics.export_name"),"-").concat(t.filter.start,"-").concat(t.filter.end,".xlsx"))})).catch((function(a){t.loading=!1,t.handleResponseErrors(a)}))}catch(a){t.loading=!1,t.handleResponseErrors(a)}case 2:case"end":return a.stop()}}),a)})))()}},watch:{currentPage:function(t){this.getPatients()},perPage:function(t){this.getPatients()}}},j=(n("iZRA"),n("AK5k"),n("KHd+")),O=Object(j.a)(M,(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("b-overlay",{attrs:{show:t.loading,blur:"2px",variant:"transparent",rounded:"lg",opacity:"0.85"},scopedSlots:t._u([{key:"overlay",fn:function(){return[n("div",{staticClass:"d-flex align-items-center"},[n("b-spinner",{attrs:{small:"",type:"grow",variant:"secondary"}}),t._v(" "),n("b-spinner",{attrs:{type:"grow",variant:"dark"}}),t._v(" "),n("b-spinner",{attrs:{small:"",type:"grow",variant:"secondary"}})],1)]},proxy:!0}])},[t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("div",{staticClass:"m-2"},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h5",[t._v(t._s(t.$t("patients.statistics.new_statistics")))])])],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12",md:"2"}},[n("label",[t._v(t._s(t.$t("start_at")))]),t._v(" "),n("flat-pickr",{staticClass:"form-control",attrs:{config:{dateFormat:"Y-m-d"},placeholder:"DD/MM/YYYY"},model:{value:t.filter.start,callback:function(a){t.$set(t.filter,"start",a)},expression:"filter.start"}})],1),t._v(" "),n("b-col",{attrs:{cols:"12",md:"2"}},[n("label",[t._v(t._s(t.$t("end_at")))]),t._v(" "),n("flat-pickr",{staticClass:"form-control",attrs:{config:{minDate:t.filter.start,dateFormat:"Y-m-d"},placeholder:"DD/MM/YYYY"},model:{value:t.filter.end,callback:function(a){t.$set(t.filter,"end",a)},expression:"filter.end"}})],1),t._v(" "),n("b-col",{attrs:{cols:"12",md:"8"}},[n("div",{staticClass:"demo-inline-spacing"},[n("b-button",{class:{"btn-block":t.isMobile},attrs:{size:"sm",variant:"primary"},on:{click:t.getPatients}},[n("feather-icon",{attrs:{icon:"SearchIcon"}}),t._v("\n                                "+t._s(t.$t("button_filter"))+"\n                            ")],1),t._v(" "),n("b-button",{class:{"btn-block":t.isMobile},attrs:{size:"sm",variant:"outline-warning"},on:{click:t.downloadReport}},[n("feather-icon",{attrs:{icon:"DownloadIcon"}}),t._v("\n                                "+t._s(t.$t("download"))+"\n                            ")],1),t._v(" "),n("b-button",{class:{"btn-block":t.isMobile},attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(a){return t.$router.push({name:"home"})}}},[n("feather-icon",{attrs:{icon:"ChevronLeftIcon"}}),t._v("\n                                "+t._s(t.$t("back_to_dashboard"))+"\n                            ")],1)],1)])],1)],1)]),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("div",{staticClass:"table-responsive"},[n("b-table",{ref:"refPatientsListTable",staticClass:"position-relative table-small text-small small",attrs:{id:"refPatientsListTable",items:t.patients,responsive:"",fields:t.column,"primary-key":"id","show-empty":"","empty-text":t.$t("datatables.sZeroRecords"),stacked:"md",small:"","sticky-header":!0,"no-border-collapse":!0},scopedSlots:t._u([{key:"cell(name)",fn:function(a){return[t.canAccess("patients.show")?n("div",[n("b-link",{staticClass:"font-weight-bold d-block text-wrap",attrs:{to:{name:"apps-patients-view",params:{id:a.item.id}}}},[t._v("\n                                "+t._s(a.item.patient_name)+"\n                            ")])],1):n("div",[t._v("\n                            "+t._s(a.item.patient_name)+"\n                        ")]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v(t._s(a.item.email)),n("br"),t._v(t._s(t.$t("patients.document_type"))+"\n                            ("+t._s(a.item.document_type)+"): "+t._s(a.item.rut))])]}},{key:"cell(email)",fn:function(a){return[t._v("\n                        "+t._s(a.item.email)+"\n                    ")]}},{key:"cell(cellphone)",fn:function(a){return[t._v("\n                        "+t._s(a.item.cellphone)+"\n                    ")]}},{key:"cell(phone)",fn:function(a){return[t._v("\n                        "+t._s(a.item.phone)+"\n                    ")]}},{key:"cell(created_at)",fn:function(a){return[t._v("\n                        "+t._s(t.dateFormat(a.item.created_at,"DD/MM/YYYY - H:mm:ss a"))+"\n                    ")]}},{key:"cell(pending)",fn:function(a){return[n("b-badge",{attrs:{variant:"warning"}},[t._v(t._s(a.item.num_pending))])]}},{key:"cell(confirmed)",fn:function(a){return[n("b-badge",{attrs:{variant:"success"}},[t._v(t._s(a.item.num_confirmed))])]}},{key:"cell(assisted)",fn:function(a){return[n("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(a.item.num_assisted))])]}},{key:"cell(unassisted)",fn:function(a){return[n("b-badge",{attrs:{variant:"dark"}},[t._v(t._s(a.item.num_unassisted))])]}},{key:"cell(canceled)",fn:function(a){return[n("b-badge",{attrs:{variant:"danger"}},[t._v(t._s(a.item.num_canceled))])]}},{key:"cell(approved)",fn:function(a){return[t._v("\n                        "+t._s(a.item.num_approved)+"\n                    ")]}},{key:"cell(unapproved)",fn:function(a){return[t._v("\n                        "+t._s(a.item.num_unapproved)+"\n                    ")]}},{key:"cell(total_debt)",fn:function(a){return[t._v("\n                        "+t._s(t.formatPrice(a.item.total_cost))+"\n                    ")]}},{key:"cell(total_paid)",fn:function(a){return[t._v("\n                        "+t._s(t.formatPrice(a.item.total_paid))+"\n                    ")]}},{key:"cell(total_balance)",fn:function(a){return[t._v("\n                        "+t._s(t.formatPrice(a.item.total_debt))+"\n                    ")]}},{key:"cell(status)",fn:function(a){return[n("b-badge",{staticClass:"text-capitalize",attrs:{pill:"",variant:"light-"+t.resolveStatusVariant(a.item.deleted_at)}},[t._v("\n                            "+t._s(t.resolveStatusTranslate(a.item.deleted_at))+"\n                        ")])]}}])})],1),t._v(" "),t.patients.length>0?n("div",{staticClass:"mx-2 mb-2"},[n("b-row",[n("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-start",attrs:{cols:"12",sm:"6"}},[n("span",{staticClass:"text-muted"},[t._v(t._s(t.resolvePaginationTranslate(t.dataMeta)))])]),t._v(" "),n("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-end",attrs:{cols:"12",sm:"6"}},[n("div",{staticClass:"mt-2 demo-spacing-0"},[n("b-pagination",{attrs:{"total-rows":t.totalPatient,"per-page":t.perPage,size:"lg"},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1)])],1)],1):t._e()])],1)],1)}),[],!1,null,"6c4624b4",null);a.default=O.exports},wGgM:function(t,a,n){var e=n("JPst"),r=n("9oHr");(a=e(!1)).i(r),a.push([t.i,".flatpickr-calendar .flatpickr-day {\n  color: #6e6b7b;\n}\n[dir] .flatpickr-calendar .flatpickr-day.today {\n  border-color: #7367f0;\n}\n.flatpickr-calendar .flatpickr-day.today:hover {\n  color: #6e6b7b;\n}\n[dir] .flatpickr-calendar .flatpickr-day.today:hover {\n  background: transparent;\n}\n.flatpickr-calendar .flatpickr-day.selected, .flatpickr-calendar .flatpickr-day.selected:hover {\n  color: #fff;\n}\n[dir] .flatpickr-calendar .flatpickr-day.selected, [dir] .flatpickr-calendar .flatpickr-day.selected:hover {\n  background: #7367f0;\n  border-color: #7367f0;\n}\n[dir] .flatpickr-calendar .flatpickr-day.inRange, [dir] .flatpickr-calendar .flatpickr-day.inRange:hover {\n  background: #f3f2fe;\n  border-color: #f3f2fe;\n}\n[dir=ltr] .flatpickr-calendar .flatpickr-day.inRange, [dir=ltr] .flatpickr-calendar .flatpickr-day.inRange:hover {\n  box-shadow: -5px 0 0 #f3f2fe, 5px 0 0 #f3f2fe;\n}\n[dir=rtl] .flatpickr-calendar .flatpickr-day.inRange, [dir=rtl] .flatpickr-calendar .flatpickr-day.inRange:hover {\n  box-shadow: 5px 0 0 #f3f2fe, -5px 0 0 #f3f2fe;\n}\n.flatpickr-calendar .flatpickr-day.startRange, .flatpickr-calendar .flatpickr-day.endRange, .flatpickr-calendar .flatpickr-day.startRange:hover, .flatpickr-calendar .flatpickr-day.endRange:hover {\n  color: #fff;\n}\n[dir] .flatpickr-calendar .flatpickr-day.startRange, [dir] .flatpickr-calendar .flatpickr-day.endRange, [dir] .flatpickr-calendar .flatpickr-day.startRange:hover, [dir] .flatpickr-calendar .flatpickr-day.endRange:hover {\n  background: #7367f0;\n  border-color: #7367f0;\n}\n[dir=ltr] .flatpickr-calendar .flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)), [dir=ltr] .flatpickr-calendar .flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)), [dir=ltr] .flatpickr-calendar .flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\n  box-shadow: -10px 0 0 #7367f0;\n}\n[dir=rtl] .flatpickr-calendar .flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)), [dir=rtl] .flatpickr-calendar .flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)), [dir=rtl] .flatpickr-calendar .flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\n  box-shadow: 10px 0 0 #7367f0;\n}\n.flatpickr-calendar .flatpickr-day.flatpickr-disabled, .flatpickr-calendar .flatpickr-day.prevMonthDay, .flatpickr-calendar .flatpickr-day.nextMonthDay {\n  color: #dae1e7;\n}\n[dir] .flatpickr-calendar .flatpickr-day:hover {\n  background: #f6f6f6;\n}\n.flatpickr-calendar:after, .flatpickr-calendar:before {\n  display: none;\n}\n.flatpickr-calendar .flatpickr-months .flatpickr-prev-month, .flatpickr-calendar .flatpickr-months .flatpickr-next-month {\n  top: -5px;\n}\n.flatpickr-calendar .flatpickr-months .flatpickr-prev-month:hover i, .flatpickr-calendar .flatpickr-months .flatpickr-prev-month:hover svg, .flatpickr-calendar .flatpickr-months .flatpickr-next-month:hover i, .flatpickr-calendar .flatpickr-months .flatpickr-next-month:hover svg {\n  fill: #7367f0;\n}\n.flatpickr-calendar .flatpickr-current-month span.cur-month {\n  font-weight: 300;\n}\n.flatpickr-calendar.open {\n  z-index: 1051;\n}\n.flatpickr-calendar.hasTime.open .flatpickr-time {\n  height: auto;\n}\n[dir] .flatpickr-time input:hover, [dir] .flatpickr-time .flatpickr-am-pm:hover, [dir] .flatpickr-time input:focus, [dir] .flatpickr-time .flatpickr-am-pm:focus {\n  background: #fff;\n}\n[dir] .dark-layout .flatpickr-calendar {\n  background: #161d31;\n  border-color: #161d31;\n  box-shadow: none;\n}\n.dark-layout .flatpickr-calendar .flatpickr-months i, .dark-layout .flatpickr-calendar .flatpickr-months svg {\n  fill: #b4b7bd;\n}\n.dark-layout .flatpickr-calendar .flatpickr-month {\n  color: #b4b7bd;\n}\n[dir=ltr] .dark-layout .flatpickr-calendar .flatpickr-weekwrapper .flatpickr-weeks {\n  box-shadow: 1px 0 0 #3b4253;\n}\n[dir=rtl] .dark-layout .flatpickr-calendar .flatpickr-weekwrapper .flatpickr-weeks {\n  box-shadow: -1px 0 0 #3b4253;\n}\n.dark-layout .flatpickr-calendar .flatpickr-weekday {\n  color: #b4b7bd;\n}\n.dark-layout .flatpickr-calendar .flatpickr-day, .dark-layout .flatpickr-calendar .flatpickr-day.today:hover {\n  color: #b4b7bd;\n}\n.dark-layout .flatpickr-calendar .flatpickr-day.selected {\n  color: #fff;\n}\n.dark-layout .flatpickr-calendar .flatpickr-day.prevMonthDay, .dark-layout .flatpickr-calendar .flatpickr-day.nextMonthDay, .dark-layout .flatpickr-calendar .flatpickr-day.flatpickr-disabled {\n  color: #4e5154 !important;\n}\n[dir] .dark-layout .flatpickr-calendar .flatpickr-day.inRange, [dir] .dark-layout .flatpickr-calendar .flatpickr-day.inRange:hover {\n  background: #283046;\n  border-color: #283046;\n}\n[dir=ltr] .dark-layout .flatpickr-calendar .flatpickr-day.inRange, [dir=ltr] .dark-layout .flatpickr-calendar .flatpickr-day.inRange:hover {\n  box-shadow: -5px 0 0 #283046, 5px 0 0 #283046;\n}\n[dir=rtl] .dark-layout .flatpickr-calendar .flatpickr-day.inRange, [dir=rtl] .dark-layout .flatpickr-calendar .flatpickr-day.inRange:hover {\n  box-shadow: 5px 0 0 #283046, -5px 0 0 #283046;\n}\n.dark-layout .flatpickr-calendar .flatpickr-day:hover:not(.selected):not(.today):not(.startRange):not(.endRange) {\n  color: #b4b7bd;\n}\n[dir] .dark-layout .flatpickr-calendar .flatpickr-day:hover:not(.selected):not(.today):not(.startRange):not(.endRange) {\n  border-color: #283046;\n}\n[dir] .dark-layout .flatpickr-calendar .flatpickr-days .flatpickr-day:hover:not(.selected):not(.today):not(.startRange):not(.endRange), [dir] .dark-layout .flatpickr-calendar .flatpickr-days .flatpickr-day:focus:not(.selected):not(.today):not(.startRange):not(.endRange) {\n  background: #283046;\n}\n[dir] .dark-layout .flatpickr-calendar .flatpickr-time {\n  border-color: #161d31 !important;\n}\n.dark-layout .flatpickr-calendar .flatpickr-time .numInput, .dark-layout .flatpickr-calendar .flatpickr-time .flatpickr-am-pm {\n  color: #b4b7bd;\n}\n[dir] .dark-layout .flatpickr-calendar .flatpickr-time .numInput:hover, [dir] .dark-layout .flatpickr-calendar .flatpickr-time .flatpickr-am-pm:hover {\n  background: #161d31;\n}\n[dir] .dark-layout .flatpickr-calendar .flatpickr-time .arrowUp:after {\n  border-bottom-color: #b4b7bd;\n}\n[dir] .dark-layout .flatpickr-calendar .flatpickr-time .arrowDown:after {\n  border-top-color: #b4b7bd;\n}\n[dir] .dark-layout .flatpickr-time input:hover, [dir] .dark-layout .flatpickr-time .flatpickr-am-pm:hover, [dir] .dark-layout .flatpickr-time input:focus, [dir] .dark-layout .flatpickr-time .flatpickr-am-pm:focus {\n  background: #161d31;\n}\n.flatpickr-input[readonly], .flatpickr-input ~ .form-control[readonly], .flatpickr-human-friendly[readonly] {\n  opacity: 1 !important;\n}\n[dir] .flatpickr-input[readonly], [dir] .flatpickr-input ~ .form-control[readonly], [dir] .flatpickr-human-friendly[readonly] {\n  background-color: inherit;\n}\n[dir] .flatpickr-weekdays {\n  margin-top: 8px;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months {\n  -webkit-appearance: none;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months, .flatpickr-current-month .numInputWrapper {\n  font-size: 1.1rem;\n  transition: all 0.15s ease-out;\n}\n[dir] .flatpickr-current-month .flatpickr-monthDropdown-months, [dir] .flatpickr-current-month .numInputWrapper {\n  border-radius: 4px;\n  padding: 2px;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months span, .flatpickr-current-month .numInputWrapper span {\n  display: none;\n}\nhtml[dir=rtl] .flatpickr-calendar .flatpickr-prev-month svg, html[dir=rtl] .flatpickr-calendar .flatpickr-next-month svg {\n  transform: rotate(180deg);\n}",""]),t.exports=a}}]);